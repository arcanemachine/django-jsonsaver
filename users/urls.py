from django.contrib.auth import views as auth_views
from django.urls import path

from . import views
from .forms import UserPasswordResetForm

app_name = 'users'

urlpatterns = [
    path('',
         views.users_root,
         name='users_root'),
    path('register/',
         views.UserRegisterView.as_view(),
         name='register'),
    path('activate/',
         views.users_root,
         name='users_activate_root'),
    path('activate/resend/',
         views.UserActivationEmailResendView.as_view(),
         name='user_activation_email_resend'),
    path('activate/<str:activation_code>/',
         views.user_activate,
         name="user_activate"),
    path('login/',
         views.UserLoginView.as_view(),
         name='login'),
    path('login/forgot-username/',
         views.UserUsernameRecoverView.as_view(),
         name='user_username_recover'),
    path('login/forgot-password/',
         auth_views.PasswordResetView.as_view(
             form_class=UserPasswordResetForm,
             template_name='users/password_reset_form.html'),
         name='password_reset'),
    path('me/',
         views.UserDetailMeView.as_view(),
         name='user_detail_me'),
    path('public/<str:username>/',
         views.UserDetailPublicView.as_view(),
         name='user_detail_public'),
    path('me/settings/',
         views.UserUpdateView.as_view(),
         name='user_update'),
    path('me/settings/account-upgrade/',
         views.UserUpdateAccountTierView.as_view(),
         name='user_update_account_tier'),
    path('me/settings/email/',
         views.UserUpdateEmailView.as_view(),
         name='user_update_email'),
    path('me/settings/email/<str:activation_code>/',
         views.user_update_email_confirm,
         name="user_update_email_confirm"),
    path('me/settings/password/',
         auth_views.PasswordChangeView.as_view(
             template_name='users/password_change_form.html'),
         name='password_change'),
    path('me/update/settings/profile-visibility/',
         views.UserUpdateIsPublicView.as_view(),
         name='user_update_is_public'),
    path('me/renew-api-key/',
         views.UserUpdateApiKeyView.as_view(),
         name='user_update_api_key'),
    path('me/delete-account/',
         views.UserDeleteView.as_view(),
         name='user_delete'),
    path('logout/',
         views.UserLogoutView.as_view(),
         name='logout'),
]
